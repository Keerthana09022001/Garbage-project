{% extends 'base.html' %}
{% load static %}
{% block content %}
<!DOCTYPE HTML>
<html>

<head>
	<link href="//fonts.googleapis.com/css?family=Raleway:400,500,600,700,800,900" rel="stylesheet">
    <script src="https://www.google.com/recaptcha/api.js" ></script>
	<title>Garbage Login</title>
	<!-- Meta-Tags -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">
<!--	<meta name="keywords" content="Spin Login Form a Responsive Web Template, Bootstrap Web Templates, Flat Web Templates, Android Compatible Web Template, Smartphone Compatible Web Template, Free Webdesigns for Nokia, Samsung, LG, Sony Ericsson, Motorola Web Design">-->
	<script>
		addEventListener("load", function () {
			setTimeout(hideURLbar, 0);
		}, false);

		function hideURLbar() {
			window.scrollTo(0, 1);
		}
	</script>
	<!-- //Meta-Tags -->
	<!-- Stylesheets -->
	<link href="{% static 'css/font-awesome.css' %}" rel="stylesheet">
	<link href="{% static 'css/style1.css' %}" rel='stylesheet' type='text/css' />
	<!--// Stylesheets -->
	<!--fonts-->
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,200i,300,300i,400,400i,600,600i,700,700i,900,900i&amp;subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese" rel="stylesheet">
	<!--//fonts-->
</head>

<body>
	<h1>Login</h1>
	<div class="clear-loading spinner">
		<span></span>
	</div>
	<div class="w3ls-login box box--big">
		<form onsubmit ="return validatee()"  action="{% url 'home2' %}" method="POST"  id="myForm">
			{% csrf_token %}
			<div class="agile-field-txt">

				<label><i class="fa fa-user" aria-hidden="true"></i> Email </label>
				<input type="text" name="email" placeholder="Enter User Email"  onkeyup='emailValidation(this)' required/>
				<span class="error-msg" id="email"> </span><br>


			</div>
			<div class="agile-field-txt">
				<label><i class="fa fa-unlock-alt" aria-hidden="true"></i> password </label>
				<input type="password" name="password" placeholder="Enter Password" onkeyup='passwordValidation(this)' required/>
				<span class="error-msg" id="password"></span><br>

				<div class="agile_label">
					<input id="check3" name="check3" type="checkbox" value="show password" onclick="myFunction()">
					<label class="check" for="check3">Show password</label>
				</div>
				<div class="agile-right">
					<a href="forgotPassword/">forgot password?</a>
				</div>
			</div>

			<div class="form-group last mb-4">
              <div style="margin-left:+0%;">
                <div class="g-recaptcha" data-sitekey="6LdCjb0kAAAAAEHZlkAgugW_bi92xkYtxECYRGzi"></div>

<div id="g-recaptcha-error"></div>
</div>
</div>

				<input type="submit" value="LOGIN">
		</form>
		<div>
			{% for message in messages %}
			<h3>{{message}}</h3>
			{% endfor %}
		</div>
	</div>
	<!-- //form ends here -->
	<!--copyright-->
	<div class="copy-wthree">
		<p>Â© 2022 Garbage Management Login Form . All Rights Reserved | Design by
			<a href="http://w3layouts.com/" target="_blank">Keerthana</a>
		</p>
	</div>

<script type="text/javascript">
function emailValidation(inputTxt){
    // ^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$
    var regx = /^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/;
    var textField = document.getElementById("email");

    if(inputTxt.value != '' ){
        if(inputTxt.value.match(regx)){
            textField.textContent = '';
            textField.style.color = "green";
        }else{
            textField.textContent = 'email is not valid!!!';
            textField.style.color = "red";
        }
    }else{
        textField.textContent = 'your input is empty';
        textField.style.color = "red";
    }
}
function passwordValidation(inputTxt){

    var regx = /(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{5,}/;
    var textField = document.getElementById("password");

    if(inputTxt.value != '' ){
            if(inputTxt.value.match(regx)){
                textField.textContent = '';
                textField.style.color = "green";

            }else{
                textField.textContent = 'Must contain at least one number and one uppercase and lowercase letter and aleast 5 characters';
                textField.style.color = "red";
            }
    }else{
        textField.textContent = 'your input is empty';
        textField.style.color = "red";
    }
}

 function validatee() {
            var pass=document.getElementById('password').value;
            var email=document.getElementById('email').value;

            if (grecaptcha.getResponse() == "") {

                document.getElementById('g-recaptcha-error').textContent = "Enter the Captcha";
                document.getElementById("g-recaptcha-error").style.color = "red";
                return false;
            }
            else if (grecaptcha.getResponse() == "") {
                alert(response)
                document.getElementById('g-recaptcha-error').innerHTML =
                    '<span style="color:red;">This field is required.</span>';
                return false;
            } else if(!emailValidation(email)){
                document.getElementById('email').textContent="please enter the email";
                document.getElementById('email').style.color="red";
                return false
            }
            else {
                return true;
        }    }
</script>
</body>
</html>
{% endblock %}

#Keerthana